
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Configuration options &#8212; NengoDL 2.2.2 docs</title>
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,600|Rajdhani:700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.nengo.ai/css/bootstrap.css" type="text/css">
<style>
  body .title-bar,
  body .documentation-source h1:after {
    background-color: #ff6600;
  }
</style>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GT8XEDLTMJ"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());
 gtag('config', 'G-GT8XEDLTMJ');
</script>
<!-- End Google tag (gtag.js) -->

<!-- Matomo -->
<script>
 var _paq = window._paq = window._paq || [];
 _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
 _paq.push(["setCookieDomain", "*.appliedbrainresearch.com"]);
 _paq.push(["setDomains", ["*.appliedbrainresearch.com","*.edge.nengo.ai","*.forum.nengo.ai","*.labs.nengo.ai","*.nengo.ai"]]);
 _paq.push(["enableCrossDomainLinking"]);
 _paq.push(["setDoNotTrack", true]);
 _paq.push(['trackPageView']);
 _paq.push(['enableLinkTracking']);
 (function() {
   var u="https://appliedbrainresearch.matomo.cloud/";
   _paq.push(['setTrackerUrl', u+'matomo.php']);
   _paq.push(['setSiteId', '3']);
   var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
   g.async=true; g.src='//cdn.matomo.cloud/appliedbrainresearch.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
 })();
</script>
<!-- End Matomo Code -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://unpkg.com/scrollreveal"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stickyfill/2.1.0/stickyfill.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<!-- From basic/layout.html -->
<script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
  
  
<script type="text/javascript" src="_static/underscore.js"></script>
  
  
<script type="text/javascript" src="_static/doctools.js"></script>
  
  
<script type="text/javascript" src="_static/language_data.js"></script>
  
  
<script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
  
  
<script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
  
<script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API reference" href="reference.html" />
    <link rel="prev" title="TensorNodes" href="tensor-node.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  </head><body class="bg-dark">

<header class="fixed-top header-top shadow-sm">
  <nav class="navbar navbar-expand-md navbar-light bg-white">
    <a class="navbar-brand" href="https://www.nengo.ai/">
      <img
        src="https://www.nengo.ai/design/_images/general-full-light.svg"
        alt="Nengo"
        class="logo"
      />
    </a>
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbar-collapse"
      aria-controls="navbar-collapse"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar-collapse">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai/">What is Nengo?</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://www.nengo.ai/examples/">Examples</a>
        </li>
        <li class="nav-item dropdown active">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-docs"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Documentation</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-docs"
          >
            
            <a class="dropdown-item" href="https://www.nengo.ai/nengo/">Nengo Core</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-gui/">Nengo GUI</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-dl/">Nengo DL</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-spa/">Nengo SPA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-extras/">Nengo Extras</a>
            <a class="dropdown-item" href="https://arvoelke.github.io/nengolib-docs/">Nengolib</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-fpga/">Nengo FPGA</a>
            <a class="dropdown-item" href="https://www.nengo.ai/nengo-loihi/">Nengo Loihi</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-ocl">Nengo OpenCL</a>
            <a class="dropdown-item" href="https://github.com/project-rig/nengo_spinnaker">Nengo SpiNNaker</a>
            <a class="dropdown-item" href="https://github.com/nengo/nengo-mpi">Nengo MPI</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/documentation/"
              >All documentation</a
            >
          </div>
        </li>
        <li class="nav-item dropdown">
          <a
            class="nav-link dropdown-toggle"
            id="navbar-dropdown-community"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            href="#"
            >Community</a
          >
          <div
            class="dropdown-menu shadow-lg border-0"
            aria-labelledby="navbar-dropdown-community"
          >
            <a class="dropdown-item" href="https://forum.nengo.ai">Forum</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://www.nengo.ai/people/"
              >People</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/summer-school/"
              >Summer school</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/contributing/"
              >Contributing</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/publications/"
              >Publications</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/videos/"
              >Videos</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/conduct/"
              >Code of conduct</a
            >
            <a class="dropdown-item" href="https://www.nengo.ai/caa/">CAA</a>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link btn btn-success btn-sm text-white"
            href="https://www.nengo.ai/getting-started/"
            >Getting started</a
          >
        </li>
      </ul>
    </div>
  </nav>
</header>
<div class="main-content gradient-top">
  <div class="container-fluid">
    <div class="row"><a class="toggle-sidenav d-block d-md-none" href="#"
  ><i class="icon-close fa fa-fw fa-arrow-left"></i
  ><i class="icon-open fa fa-fw fa-arrow-right"></i
></a>
<div role="complementary" class="sidenav col-4 col-xl-3 p-0 border-right">
  <h3 class="pt-5 px-5">
    <a href="index.html">
      <img
        class="img-fluid documentation-image"
        src="https://www.nengo.ai/design/_images/nengo-dl-full-light.svg"
        alt="NengoDL"
      />
    </a>
  </h3>
  
  <form class="px-5 pb-5 mb-0 mt-3 border-bottom">
    <div class="form-group">
      <label class="text-gray">Version:</label>
      <select class="custom-select" onchange="switchVersion(this);">
        
        
        <option value="../config.html">latest</option>
        
        
          
        <option selected>v2.2.2</option>
          
        
          
        <option value="../v2.2.1/config.html">
          v2.2.1
        </option>
          
        
          
        <option value="../v2.2.0/config.html">
          v2.2.0
        </option>
          
        
          
        <option value="../v2.1.1/config.html">
          v2.1.1
        </option>
          
        
          
        <option value="../v2.1.0/config.html">
          v2.1.0
        </option>
          
        
          
        <option value="../v2.0.0/config.html">
          v2.0.0
        </option>
          
        
          
        <option value="../v1.2.1/config.html">
          v1.2.1
        </option>
          
        
          
        <option value="../v1.2.0/config.html">
          v1.2.0
        </option>
          
        
          
        <option value="../v1.1.0/config.html">
          v1.1.0
        </option>
          
        
          
        <option value="../v1.0.0/config.html">
          v1.0.0
        </option>
          
        
          
        <option value="../v0.6.2/config.html">
          v0.6.2
        </option>
          
        
          
        <option value="../v0.6.1/config.html">
          v0.6.1
        </option>
          
        
          
        <option value="../v0.6.0/config.html">
          v0.6.0
        </option>
          
        
          
        <option value="../v0.5.2/config.html">
          v0.5.2
        </option>
          
        
          
        <option value="../v0.5.1/config.html">
          v0.5.1
        </option>
          
        
          
        <option value="../v0.5.0/config.html">
          v0.5.0
        </option>
          
        
          
        <option value="../v0.4.0/config.html">
          v0.4.0
        </option>
          
        
          
        <option value="../v0.3.1/config.html">
          v0.3.1
        </option>
          
        
          
        <option value="../v0.3.0/config.html">
          v0.3.0
        </option>
          
        
          
        <option value="../v0.2.0/config.html">
          v0.2.0
        </option>
          
        
      </select>
    </div>
  </form>
  
  <div class="p-5 toctree">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user-guide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simulator.html">NengoDL Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="training.html">Optimizing a NengoDL model</a></li>
<li class="toctree-l2"><a class="reference internal" href="tensor-node.html">TensorNodes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuration options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#trainable">trainable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#planner">planner</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sorter">sorter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simplifications">simplifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="#session-config">session_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inference-only">inference_only</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lif-smoothing">lif_smoothing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dtype">dtype</a></li>
<li class="toctree-l3"><a class="reference internal" href="#keep-history">keep_history</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Additional resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="project.html">Project information</a></li>
</ul>

  </div>
<form class="p-5 my-0 border-top" action="search.html" method="get">
  <div class="form-group form-group-single">
    <input type="text" name="q" class="form-control" placeholder="Search" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
    <button type="submit" class="btn btn-link">
      <img src="https://www.nengo.ai/img/icon-search.svg" alt="Go" />
    </button>
  </div>
</form></div>
      

      <div class="col-12 col-md-8 col-xl-9">
        <div class="container">
          <div class="row">
            <div class="col-10 offset-1 pb-5 documentation-source" role="main">
              
  <div class="section" id="configuration-options">
<h1>Configuration options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h1>
<p>NengoDL uses Nengo’s <a class="reference external" href="https://www.nengo.ai/nengo/config.html">config system</a>
to allow users to control more fine-grained aspects of the simulation.  In
general, most users will not need to worry about these options, and can leave
them at their default settings.  However, these options may be useful in
some scenarios.</p>
<p><a class="reference internal" href="reference.html#nengo_dl.config.configure_settings" title="nengo_dl.config.configure_settings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">configure_settings</span></code></a> is a utility function that can be used to set these
configuration options.  It needs to be called within a Network context, as in:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">config_option</span><span class="o">=</span><span class="n">config_value</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Each call to <code class="docutils literal notranslate"><span class="pre">configure_settings</span></code> only sets the configuration
options specified to that call.  That is,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">option0</span><span class="o">=</span><span class="n">val0</span><span class="p">)</span>
<span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">option1</span><span class="o">=</span><span class="n">val1</span><span class="p">)</span>
</pre></div>
</div>
<p>is equivalent to</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">option0</span><span class="o">=</span><span class="n">val0</span><span class="p">,</span> <span class="n">option1</span><span class="o">=</span><span class="n">val1</span><span class="p">)</span>
</pre></div>
</div>
<p>Under the hood, <code class="docutils literal notranslate"><span class="pre">configure_settings</span></code> is setting <code class="docutils literal notranslate"><span class="pre">config</span></code> attributes on
the top-level network.  All of the same effects could be achieved by setting
those <code class="docutils literal notranslate"><span class="pre">config</span></code> attributes directly, <code class="docutils literal notranslate"><span class="pre">configure_settings</span></code> simply makes this
an easier process.</p>
<div class="section" id="trainable">
<span id="config-trainable"></span><h2>trainable<a class="headerlink" href="#trainable" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">trainable</span></code> config attribute can be used to control which parts of a
model will be optimized by the <a class="reference internal" href="reference.html#nengo_dl.simulator.Simulator.train" title="nengo_dl.simulator.Simulator.train"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Simulator.train</span></code></a> process.
<code class="docutils literal notranslate"><span class="pre">configure_settings(trainable=None)</span></code> will add a configurable <code class="docutils literal notranslate"><span class="pre">trainable</span></code>
attribute to the objects in a network.  Setting <code class="docutils literal notranslate"><span class="pre">trainable=None</span></code> will use the
default trainability settings, or <code class="docutils literal notranslate"><span class="pre">trainable=True/False</span></code> can be used to
override the default for all objects.</p>
<p>Once the <code class="docutils literal notranslate"><span class="pre">trainable</span></code> attribute has been added to all the objects in a model,
the <code class="docutils literal notranslate"><span class="pre">config</span></code> system can then be used to control the trainability of
individual objects/networks.</p>
<p>For example, suppose we only want to optimize one connection in our network,
while leaving everything else unchanged.  This could be achieved via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="c1"># this adds the `trainable` attribute to all the trainable objects</span>
    <span class="c1"># in the network, and initializes it to `False`</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">trainable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="n">a</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Node</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="n">size_in</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">nengo</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

    <span class="c1"># make this specific connection trainable</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">conn</span><span class="p">]</span><span class="o">.</span><span class="n">trainable</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
<p>Or if we wanted to disable training for some subnetwork:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">trainable</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="o">...</span>
    <span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">subnet</span><span class="p">:</span>
        <span class="n">net</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">subnet</span><span class="p">]</span><span class="o">.</span><span class="n">trainable</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">config[nengo.Ensemble].trainable</span></code> controls both encoders and
biases, as both are properties of an Ensemble.  However, it is possible to
separately control the biases via <code class="docutils literal notranslate"><span class="pre">config[nengo.ensemble.Neurons].trainable</span></code>
or <code class="docutils literal notranslate"><span class="pre">config[my_ensemble.neurons].trainable</span></code>.</p>
<p>There are two important caveats to keep in mind when configuring <code class="docutils literal notranslate"><span class="pre">trainable</span></code>,
which differ from the standard config behaviour:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">trainable</span></code> applies to all objects in a network, regardless of whether
they were created before or after <code class="docutils literal notranslate"><span class="pre">trainable</span></code> is set.  For example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">net</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">nengo</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">]</span><span class="o">.</span><span class="n">trainable</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>is the same as</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">nengo</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">]</span><span class="o">.</span><span class="n">trainable</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="o">...</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">trainable</span></code> can only be set on the config of the top-level network.  For
example,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">trainable</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">subnet</span><span class="p">:</span>
        <span class="n">my_ens</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Ensemble</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

        <span class="c1"># incorrect</span>
        <span class="n">subnet</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">my_ens</span><span class="p">]</span><span class="o">.</span><span class="n">trainable</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># correct</span>
        <span class="n">net</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">my_ens</span><span class="p">]</span><span class="o">.</span><span class="n">trainable</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="planner">
<h2>planner<a class="headerlink" href="#planner" title="Permalink to this headline">¶</a></h2>
<p>This option can be used to change the algorithm used for assigning an order
to simulation operations during the graph optimization stage.  For example, we
could change the planning algorithm to the
<a class="reference internal" href="reference.html#nengo_dl.graph_optimizer.transitive_planner" title="nengo_dl.graph_optimizer.transitive_planner"><code class="xref py py-obj docutils literal notranslate"><span class="pre">graph_optimizer.transitive_planner</span></code></a> via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nengo_dl.graph_optimizer</span> <span class="kn">import</span> <span class="n">transitive_planner</span>

<span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">planner</span><span class="o">=</span><span class="n">transitive_planner</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="sorter">
<h2>sorter<a class="headerlink" href="#sorter" title="Permalink to this headline">¶</a></h2>
<p>This option can be used to change the algorithm used for sorting
signals/operators during the graph optimization stage.  For example, we could
disable sorting via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nengo_dl.graph_optimizer</span> <span class="kn">import</span> <span class="n">noop_order_signals</span>

<span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">sorter</span><span class="o">=</span><span class="n">noop_order_signals</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="simplifications">
<h2>simplifications<a class="headerlink" href="#simplifications" title="Permalink to this headline">¶</a></h2>
<p>This option can be used to change the simplification transformations applied
during the graph optimization stage.  This takes a list of transformation
functions, where each will be applied in sequence.  For example, we could apply
only two of the default simplifications via</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nengo_dl.graph_optimizer</span> <span class="kn">import</span> <span class="n">remove_identity_muls</span><span class="p">,</span> <span class="n">remove_zero_incs</span>

<span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
    <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">simplifications</span><span class="o">=</span><span class="p">[</span><span class="n">remove_identity_muls</span><span class="p">,</span>
                                                 <span class="n">remove_zero_incs</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="session-config">
<h2>session_config<a class="headerlink" href="#session-config" title="Permalink to this headline">¶</a></h2>
<p>TensorFlow has its own <a class="reference external" href="https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/protobuf/config.proto">configuration options</a>
which can control various aspects of the TensorFlow Session.
<code class="docutils literal notranslate"><span class="pre">session_config</span></code> can be used to set those options on the underlying NengoDL
simulator Session.  These are specified as a dictionary mapping config names
to values.  For example, if in TensorFlow we wanted to do</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">ConfigProto</span><span class="p">()</span>
<span class="n">config</span><span class="o">.</span><span class="n">gpu_options</span><span class="o">.</span><span class="n">allow_growth</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">sess</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>the equivalent in NengoDL would be</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span>
    <span class="n">session_config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;gpu_options.allow_growth&quot;</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="section" id="inference-only">
<h2>inference_only<a class="headerlink" href="#inference-only" title="Permalink to this headline">¶</a></h2>
<p>By default, NengoDL models are built to support both training and inference.
However, sometimes we may know that we’ll only be using a simulation for
inference (for example, if we want to take advantage of the batching/GPU
acceleration of NengoDL, but don’t need the <code class="docutils literal notranslate"><span class="pre">sim.train</span></code> functionality).  In
that case we can improve the simulation speed of the model by omitting some
of the aspects related to training.  Setting
<code class="docutils literal notranslate"><span class="pre">nengo_dl.configure_settings(inference_only=True)</span></code> will cause the network
to be built in inference-only mode.</p>
</div>
<div class="section" id="lif-smoothing">
<h2>lif_smoothing<a class="headerlink" href="#lif-smoothing" title="Permalink to this headline">¶</a></h2>
<p>During training, NengoDL automatically replaces the non-differentiable
spiking <a class="reference external" href="https://www.nengo.ai/nengo/frontend-api.html#nengo.LIF" title="(in Nengo v3.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LIF</span></code></a> neuron model with the differentiable
<a class="reference external" href="https://www.nengo.ai/nengo/frontend-api.html#nengo.LIFRate" title="(in Nengo v3.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LIFRate</span></code></a> approximation.
However, although <code class="docutils literal notranslate"><span class="pre">LIFRate</span></code> is generally differentiable, it has a sharp
discontinuity at the firing threshold.  In some cases this can lead to
difficulties during the training process, and performance can be improved by
smoothing the <code class="docutils literal notranslate"><span class="pre">LIFRate</span></code> response around the firing threshold.  This is
known as the <a class="reference internal" href="reference.html#nengo_dl.neurons.SoftLIFRate" title="nengo_dl.neurons.SoftLIFRate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SoftLIFRate</span></code></a> neuron model.</p>
<p><code class="docutils literal notranslate"><span class="pre">SoftLIFRate</span></code> has a parameter <code class="docutils literal notranslate"><span class="pre">sigma</span></code> that controls the degree of smoothing
(<code class="docutils literal notranslate"><span class="pre">SoftLIFRate</span></code> approaches <code class="docutils literal notranslate"><span class="pre">LIFRate</span></code> as <code class="docutils literal notranslate"><span class="pre">sigma</span></code> goes to zero).  Setting
<code class="docutils literal notranslate"><span class="pre">nengo_dl.configure_settings(lif_smoothing=x)</span></code> will cause the <code class="docutils literal notranslate"><span class="pre">LIF</span></code>
gradients to be approximated by <code class="docutils literal notranslate"><span class="pre">SoftLIFRate</span></code> instead of <code class="docutils literal notranslate"><span class="pre">LIFRate</span></code>, with
<code class="docutils literal notranslate"><span class="pre">sigma=x</span></code>.</p>
</div>
<div class="section" id="dtype">
<h2>dtype<a class="headerlink" href="#dtype" title="Permalink to this headline">¶</a></h2>
<p>This specifies the floating point precision to be used for the simulator’s
internal computations.  It can be either <code class="docutils literal notranslate"><span class="pre">tf.float32</span></code> or <code class="docutils literal notranslate"><span class="pre">tf.float64</span></code>,
for 32 or 64-bit precision, respectively.  32-bit precision is the default,
as it is faster, will use less memory, and in most cases will not make a
difference in the results of the simulation.  However, if very precise outputs
are required then this can be changed to <code class="docutils literal notranslate"><span class="pre">tf.float64</span></code>.</p>
</div>
<div class="section" id="keep-history">
<h2>keep_history<a class="headerlink" href="#keep-history" title="Permalink to this headline">¶</a></h2>
<p>By default, a <a class="reference external" href="https://www.nengo.ai/nengo/frontend-api.html#nengo.Probe" title="(in Nengo v3.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nengo.Probe</span></code></a> stores the probed output from every simulation
timestep.  However, sometimes in NengoDL we want to add a probe to something
for other reasons, and don’t necessarily care about all of that data (which can
consume a lot of memory).  For example, we might want to apply a probe to some
connection weights so that we can apply a regularization penalty, but since
the weights aren’t changing during a simulation run we don’t need to keep
the value from every simulation step.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">keep_history</span></code> config option allows Probes to be configured so that they
only store the output of the probed signal from the last simulation timestep.
Calling</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">keep_history</span><span class="o">=</span><span class="bp">True</span><span class="o">/</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>will set the default value for all probes in the simulation, which can then
be further configured on a per-probe basis, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Network</span><span class="p">()</span> <span class="k">as</span> <span class="n">net</span><span class="p">:</span>
   <span class="n">nengo_dl</span><span class="o">.</span><span class="n">configure_settings</span><span class="p">(</span><span class="n">keep_history</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
   <span class="o">...</span>
   <span class="n">my_probe</span> <span class="o">=</span> <span class="n">nengo</span><span class="o">.</span><span class="n">Probe</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
   <span class="n">net</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">my_probe</span><span class="p">]</span><span class="o">.</span><span class="n">keep_history</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
</div>
</div>


            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div><footer class="text-light footer-main gradient-bottom">
  <p class="small text-center mb-0">
    <a class="no-hover-line" href="https://appliedbrainresearch.com">
      <img
        src="https://appliedbrainresearch.com/img/logo-blue-notext.svg"
        height="48"
      />
    </a>
    <a href="https://www.nengo.ai/">What is Nengo?</a>
    <a href="https://www.nengo.ai/examples/">Examples</a>
    <a href="https://www.nengo.ai/documentation/">Documentation</a>
    <a href="https://www.nengo.ai/getting-started/">Getting started</a>
    <a href="https://www.nengo.ai/privacy/">Privacy</a>
  </p>
  <p class="small text-center mb-0">&copy; Applied Brain Research</p>
</footer>
<script>
  function switchVersion(select) {
    var option = select.selectedOptions[0];
    if (option.hasAttribute("value")) {
      window.location = option.value;
    }
  }
</script>

<script>
  var elements = document.querySelectorAll('.sidenav');
  Stickyfill.add(elements);
</script>
<script>
  ScrollReveal().reveal(".fade-in", {
      scale: 0.85,
      duration: 1000,
      delay: 250,
      interval: 50
  });
</script>
<script>
  $('a.toggle-sidenav').on('click', function(e) {
    e.preventDefault();
    if ( $(this).hasClass('active') ) {
      $(this).removeClass('active');
      $('.sidenav').removeClass('open');
    } else {
      $(this).addClass('active');
      $('.sidenav').addClass('open');
    }
  });
</script>
<script>
  var lists = document.querySelectorAll('.toctree ul');
  lists.forEach((ul) => {
      ul.classList.add("nav");
  });
  var links = document.querySelectorAll('.toctree a');
  links.forEach((link) => {
      link.classList.add("nav-link");
  });
  $("body").scrollspy({target: ".sidenav"});
</script>
  </body>
</html>